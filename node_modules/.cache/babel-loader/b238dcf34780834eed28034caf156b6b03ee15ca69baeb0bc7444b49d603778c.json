{"ast":null,"code":"import _objectSpread from\"/Users/pascal/workspace/plan_de_charge/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import{API_BASE_URL}from'../apiConfig';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminManageSubjectTypes=_ref=>{let{subjectTypes,setSubjectTypes,newSubjectType,setNewSubjectType}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"subject-types-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Subject Types\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"subject-types-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"subject-types-list\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:Object.entries(subjectTypes).map(_ref2=>{let[id,type]=_ref2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:id}),/*#__PURE__*/_jsx(\"td\",{contentEditable:true,suppressContentEditableWarning:true,onBlur:e=>{const newType=e.currentTarget.textContent;if(newType!==type){const token=localStorage.getItem('jwtToken');if(token){fetch(\"\".concat(API_BASE_URL,\"/api/subject-types/\").concat(id),{method:'PUT',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify({type:newType})}).then(response=>{if(response.ok){// Update the subject type in the state\nsetSubjectTypes(prevTypes=>_objectSpread(_objectSpread({},prevTypes),{},{[id]:newType}));}else{// No alert for error\n}}).catch(error=>{console.error('Error updating subject type:',error);// No alert for error\n});}}},children:type}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"common-add-button\",onClick:()=>{const isConfirmed=window.confirm(\"Are you sure you want to delete the subject type \\\"\".concat(type,\"\\\"?\"));if(isConfirmed){const token=localStorage.getItem('jwtToken');if(token){fetch(\"\".concat(API_BASE_URL,\"/api/subject-types/\").concat(id),{method:'DELETE',headers:{Authorization:\"Bearer \".concat(token)}}).then(response=>{if(response.ok){// Update the subject types in the state\nsetSubjectTypes(prevTypes=>{const newTypes=_objectSpread({},prevTypes);delete newTypes[id];return newTypes;});}else{// No alert for error\n}}).catch(error=>{console.error('Error deleting subject type:',error);// No alert for error\n});}}},children:\"Remove\"})})]},id);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"subject-types-add\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Type\",value:newSubjectType,onChange:e=>setNewSubjectType(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(newSubjectType){const token=localStorage.getItem('jwtToken');if(token){fetch(\"\".concat(API_BASE_URL,\"/api/subject-types\"),{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify({type:newSubjectType})}).then(response=>{if(response.ok){// Fetch the updated list of subject types\nfetch(\"\".concat(API_BASE_URL,\"/api/subject-types\"),{headers:{Authorization:\"Bearer \".concat(token)}}).then(response=>response.json()).then(typeData=>{const typesMap=typeData.reduce((acc,type)=>{acc[type.id_subject_type]=type.type;return acc;},{});setSubjectTypes(typesMap);setNewSubjectType('');}).catch(error=>{console.error('Error fetching subject types:',error);});}else{// No alert for error\n}}).catch(error=>{console.error('Error adding subject type:',error);// No alert for error\n});}}else{alert('Please fill in all required fields.');}},disabled:!newSubjectType,children:\"Add Type\"})]})]})]});};export default AdminManageSubjectTypes;","map":{"version":3,"names":["React","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","AdminManageSubjectTypes","_ref","subjectTypes","setSubjectTypes","newSubjectType","setNewSubjectType","className","children","Object","entries","map","_ref2","id","type","contentEditable","suppressContentEditableWarning","onBlur","e","newType","currentTarget","textContent","token","localStorage","getItem","fetch","concat","method","headers","Authorization","body","JSON","stringify","then","response","ok","prevTypes","_objectSpread","catch","error","console","onClick","isConfirmed","window","confirm","newTypes","placeholder","value","onChange","target","json","typeData","typesMap","reduce","acc","id_subject_type","alert","disabled"],"sources":["/Users/pascal/workspace/plan_de_charge/front/src/components/Admin_manage_subject_types.tsx"],"sourcesContent":["import React from 'react';\nimport { API_BASE_URL } from '../apiConfig';\n\ninterface AdminManageSubjectTypesProps {\n  subjectTypes: { [id: number]: string };\n  setSubjectTypes: React.Dispatch<React.SetStateAction<{ [id: number]: string }>>;\n  newSubjectType: string;\n  setNewSubjectType: React.Dispatch<React.SetStateAction<string>>;\n}\n\nconst AdminManageSubjectTypes: React.FC<AdminManageSubjectTypesProps> = ({\n  subjectTypes,\n  setSubjectTypes,\n  newSubjectType,\n  setNewSubjectType\n}) => {\n\n  return (\n    <div className=\"subject-types-section\">\n      <h2>Subject Types</h2>\n      <div className=\"subject-types-content\">\n        <div className=\"subject-types-list\">\n          <table>\n            <thead>\n              <tr>\n                <th>ID</th>\n                <th>Type</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {Object.entries(subjectTypes).map(([id, type]) => (\n                <tr key={id}>\n                  <td>{id}</td>\n                  <td\n                    contentEditable\n                    suppressContentEditableWarning\n                    onBlur={(e) => {\n                      const newType = e.currentTarget.textContent;\n                      if (newType !== type) {\n                        const token = localStorage.getItem('jwtToken');\n                        if (token) {\n                          fetch(`${API_BASE_URL}/api/subject-types/${id}`, {\n                            method: 'PUT',\n                            headers: {\n                              'Content-Type': 'application/json',\n                              Authorization: `Bearer ${token}`,\n                            },\n                            body: JSON.stringify({ type: newType }),\n                          })\n                            .then(response => {\n                              if (response.ok) {\n                                // Update the subject type in the state\n                                setSubjectTypes(prevTypes => ({\n                                  ...prevTypes,\n                                  [id]: newType,\n                                }));\n                              } else {\n                                // No alert for error\n                              }\n                            })\n                            .catch(error => {\n                              console.error('Error updating subject type:', error);\n                              // No alert for error\n                            });\n                        }\n                      }\n                    }}\n                  >\n                    {type}\n                  </td>\n                  <td>\n                    <button\n                      className=\"common-add-button\"\n                      onClick={() => {\n                        const isConfirmed = window.confirm(`Are you sure you want to delete the subject type \"${type}\"?`);\n                        if (isConfirmed) {\n                          const token = localStorage.getItem('jwtToken');\n                          if (token) {\n                            fetch(`${API_BASE_URL}/api/subject-types/${id}`, {\n                              method: 'DELETE',\n                              headers: {\n                                Authorization: `Bearer ${token}`,\n                              },\n                            })\n                              .then(response => {\n                                if (response.ok) {\n                                  // Update the subject types in the state\n                                  setSubjectTypes(prevTypes => {\n                                    const newTypes = { ...prevTypes };\n                                    delete newTypes[id as unknown as keyof typeof newTypes];\n                                    return newTypes;\n                                  });\n                                } else {\n                                  // No alert for error\n                                }\n                              })\n                              .catch(error => {\n                                console.error('Error deleting subject type:', error);\n                                // No alert for error\n                              });\n                          }\n                        }\n                      }}\n                    >\n                      Remove\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n        <div className=\"subject-types-add\">\n          <input\n            type=\"text\"\n            placeholder=\"Type\"\n            value={newSubjectType}\n            onChange={(e) => setNewSubjectType(e.target.value)}\n          />\n          <button\n            onClick={() => {\n              if (newSubjectType) {\n                const token = localStorage.getItem('jwtToken');\n                if (token) {\n                  fetch(`${API_BASE_URL}/api/subject-types`, {\n                    method: 'POST',\n                    headers: {\n                      'Content-Type': 'application/json',\n                      Authorization: `Bearer ${token}`,\n                    },\n                    body: JSON.stringify({ type: newSubjectType }),\n                  })\n                    .then(response => {\n                      if (response.ok) {\n                        // Fetch the updated list of subject types\n                        fetch(`${API_BASE_URL}/api/subject-types`, {\n                          headers: {\n                            Authorization: `Bearer ${token}`,\n                          },\n                        })\n                          .then(response => response.json())\n                          .then(typeData => {\n                            const typesMap = typeData.reduce((acc: { [id: number]: string }, type: any) => {\n                              acc[type.id_subject_type] = type.type;\n                              return acc;\n                            }, {});\n                            setSubjectTypes(typesMap);\n                            setNewSubjectType('');\n                          })\n                          .catch(error => {\n                            console.error('Error fetching subject types:', error);\n                          });\n                      } else {\n                        // No alert for error\n                      }\n                    })\n                    .catch(error => {\n                      console.error('Error adding subject type:', error);\n                      // No alert for error\n                    });\n                }\n              } else {\n                alert('Please fill in all required fields.');\n              }\n            }}\n            disabled={!newSubjectType}\n          >\n            Add Type\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminManageSubjectTypes;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}