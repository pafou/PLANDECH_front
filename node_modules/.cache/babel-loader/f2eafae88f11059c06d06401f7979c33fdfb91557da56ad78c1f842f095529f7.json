{"ast":null,"code":"import React from'react';import{API_BASE_URL}from'../apiConfig';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminManageTeamMembers=_ref=>{let{teamMembers,setTeamMembers,teams,newMemberName,setNewMemberName,newMemberFirstname,setNewMemberFirstname,newMemberId,setNewMemberId,selectedTeamId,setSelectedTeamId}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"team-members-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Team Members\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"team-members-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"team-members-list\",children:teams.map(team=>{const teamMembersList=teamMembers.filter(member=>member.id_team===team.id_team).sort((a,b)=>a.name.localeCompare(b.name));return/*#__PURE__*/_jsxs(\"div\",{className:\"team-table\",children:[/*#__PURE__*/_jsx(\"h3\",{children:team.team}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Firstname\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:teamMembersList.map(member=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:member.id_pers}),/*#__PURE__*/_jsx(\"td\",{children:member.name}),/*#__PURE__*/_jsx(\"td\",{children:member.firstname}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"common-add-button\",onClick:()=>{const isConfirmed=window.confirm(\"Are you sure you want to remove \".concat(member.firstname,\" \").concat(member.name,\" from the team?\"));if(isConfirmed){const token=localStorage.getItem('jwtToken');if(token){fetch(\"\".concat(API_BASE_URL,\"/api/team-members/\").concat(member.id_pers),{method:'DELETE',headers:{Authorization:\"Bearer \".concat(token)}}).then(response=>{if(response.ok){setTeamMembers(teamMembers.filter(m=>m.id_pers!==member.id_pers));}else{alert('Error removing member');}}).catch(error=>{console.error('Error removing member:',error);alert('Error removing member');});}}},children:\"Remove\"})})]},member.id_pers))})]})]},team.id_team);})}),/*#__PURE__*/_jsx(\"h3\",{children:\"Add a new member\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"team-members-add\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\",value:newMemberName,onChange:e=>setNewMemberName(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Firstname\",value:newMemberFirstname,onChange:e=>setNewMemberFirstname(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"ID\",value:newMemberId!==null?newMemberId:'',onChange:e=>setNewMemberId(e.target.value?Number(e.target.value):null)}),/*#__PURE__*/_jsxs(\"select\",{value:selectedTeamId!==null?selectedTeamId:'',onChange:e=>setSelectedTeamId(Number(e.target.value)),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a team\"}),teams.map(team=>/*#__PURE__*/_jsx(\"option\",{value:team.id_team,children:team.team},team.id_team))]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{const token=localStorage.getItem('jwtToken');if(token&&newMemberName&&newMemberFirstname&&newMemberId!==null&&selectedTeamId!==null){fetch(\"\".concat(API_BASE_URL,\"/api/team-members/create\"),{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify({id_pers:newMemberId,name:newMemberName,firstname:newMemberFirstname,id_team:selectedTeamId})}).then(response=>{if(response.ok){return response.json();}else{return response.json().then(errorData=>{let errorMessage='Error adding member';if(errorData&&errorData.message){errorMessage+=\": \".concat(errorData.message);}alert(errorMessage);throw new Error(errorMessage);});}}).then(data=>{// Update the team members list with the new member\nsetTeamMembers(prevMembers=>[...prevMembers,{id_pers:newMemberId,name:newMemberName,firstname:newMemberFirstname,id_team:selectedTeamId}]);// Reset the input fields\nsetNewMemberName('');setNewMemberFirstname('');setNewMemberId(null);setSelectedTeamId(null);}).catch(error=>{console.error('Error adding member:',error);alert('Error adding member: '+error.message);});}else{alert('Please fill in all required fields.');}},disabled:!newMemberName||!newMemberFirstname||newMemberId===null||selectedTeamId===null,children:\"Add Member\"})]})]})]});};export default AdminManageTeamMembers;","map":{"version":3,"names":["React","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","AdminManageTeamMembers","_ref","teamMembers","setTeamMembers","teams","newMemberName","setNewMemberName","newMemberFirstname","setNewMemberFirstname","newMemberId","setNewMemberId","selectedTeamId","setSelectedTeamId","className","children","map","team","teamMembersList","filter","member","id_team","sort","a","b","name","localeCompare","id_pers","firstname","onClick","isConfirmed","window","confirm","concat","token","localStorage","getItem","fetch","method","headers","Authorization","then","response","ok","m","alert","catch","error","console","type","placeholder","value","onChange","e","target","Number","body","JSON","stringify","json","errorData","errorMessage","message","Error","data","prevMembers","disabled"],"sources":["/Users/pascal/workspace/plan_de_charge/front/src/components/Admin_manage_team_members.tsx"],"sourcesContent":["import React from 'react';\nimport { API_BASE_URL } from '../apiConfig';\n\ninterface Team {\n  id_team: number;\n  team: string;\n}\n\ninterface TeamMember {\n  id_pers: number;\n  name: string;\n  firstname: string;\n  id_team: number;\n}\n\ninterface AdminManageTeamMembersProps {\n  teamMembers: TeamMember[];\n  setTeamMembers: React.Dispatch<React.SetStateAction<TeamMember[]>>;\n  teams: Team[];\n  newMemberName: string;\n  setNewMemberName: React.Dispatch<React.SetStateAction<string>>;\n  newMemberFirstname: string;\n  setNewMemberFirstname: React.Dispatch<React.SetStateAction<string>>;\n  newMemberId: number | null;\n  setNewMemberId: React.Dispatch<React.SetStateAction<number | null>>;\n  selectedTeamId: number | null;\n  setSelectedTeamId: React.Dispatch<React.SetStateAction<number | null>>;\n}\n\nconst AdminManageTeamMembers: React.FC<AdminManageTeamMembersProps> = ({\n  teamMembers,\n  setTeamMembers,\n  teams,\n  newMemberName,\n  setNewMemberName,\n  newMemberFirstname,\n  setNewMemberFirstname,\n  newMemberId,\n  setNewMemberId,\n  selectedTeamId,\n  setSelectedTeamId\n}) => {\n\n  return (\n    <div className=\"team-members-section\">\n      <h2>Team Members</h2>\n      <div className=\"team-members-content\">\n        <div className=\"team-members-list\">\n{teams.map(team => {\n  const teamMembersList = teamMembers\n    .filter(member => member.id_team === team.id_team)\n    .sort((a, b) => a.name.localeCompare(b.name));\n\n  return (\n    <div key={team.id_team} className=\"team-table\">\n      <h3>{team.team}</h3>\n      <table>\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>Name</th>\n            <th>Firstname</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {teamMembersList.map(member => (\n            <tr key={member.id_pers}>\n              <td>{member.id_pers}</td>\n              <td>{member.name}</td>\n              <td>{member.firstname}</td>\n              <td>\n                <button\n                  className=\"common-add-button\"\n                  onClick={() => {\n                    const isConfirmed = window.confirm(`Are you sure you want to remove ${member.firstname} ${member.name} from the team?`);\n                    if (isConfirmed) {\n                      const token = localStorage.getItem('jwtToken');\n                      if (token) {\n                        fetch(`${API_BASE_URL}/api/team-members/${member.id_pers}`, {\n                          method: 'DELETE',\n                          headers: {\n                            Authorization: `Bearer ${token}`,\n                          },\n                        })\n                          .then(response => {\n                            if (response.ok) {\n                              setTeamMembers(teamMembers.filter(m => m.id_pers !== member.id_pers));\n                            } else {\n                              alert('Error removing member');\n                            }\n                          })\n                          .catch(error => {\n                            console.error('Error removing member:', error);\n                            alert('Error removing member');\n                          });\n                      }\n                    }\n                  }}\n                >\n                  Remove\n                </button>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n})}\n        </div>\n<h3>Add a new member</h3>\n<div className=\"team-members-add\">\n<input\n  type=\"text\"\n  placeholder=\"Name\"\n  value={newMemberName}\n  onChange={(e) => setNewMemberName(e.target.value)}\n/>\n<input\n  type=\"text\"\n  placeholder=\"Firstname\"\n  value={newMemberFirstname}\n  onChange={(e) => setNewMemberFirstname(e.target.value)}\n/>\n<input\n  type=\"number\"\n  placeholder=\"ID\"\n  value={newMemberId !== null ? newMemberId : ''}\n  onChange={(e) => setNewMemberId(e.target.value ? Number(e.target.value) : null)}\n/>\n<select\n  value={selectedTeamId !== null ? selectedTeamId : ''}\n  onChange={(e) => setSelectedTeamId(Number(e.target.value))}\n>\n  <option value=\"\">Select a team</option>\n  {teams.map(team => (\n    <option key={team.id_team} value={team.id_team}>\n      {team.team}\n    </option>\n  ))}\n</select>\n<button\n  onClick={() => {\n    const token = localStorage.getItem('jwtToken');\n    if (token && newMemberName && newMemberFirstname && newMemberId !== null && selectedTeamId !== null) {\n      fetch(`${API_BASE_URL}/api/team-members/create`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          id_pers: newMemberId,\n          name: newMemberName,\n          firstname: newMemberFirstname,\n          id_team: selectedTeamId,\n        }),\n      })\n        .then(response => {\n          if (response.ok) {\n            return response.json();\n          } else {\n            return response.json().then(errorData => {\n              let errorMessage = 'Error adding member';\n              if (errorData && errorData.message) {\n                errorMessage += `: ${errorData.message}`;\n              }\n              alert(errorMessage);\n              throw new Error(errorMessage);\n            });\n          }\n        })\n        .then(data => {\n          // Update the team members list with the new member\n          setTeamMembers(prevMembers => [\n            ...prevMembers,\n            {\n              id_pers: newMemberId!,\n              name: newMemberName,\n              firstname: newMemberFirstname,\n              id_team: selectedTeamId!,\n            },\n          ]);\n\n          // Reset the input fields\n          setNewMemberName('');\n          setNewMemberFirstname('');\n          setNewMemberId(null);\n          setSelectedTeamId(null);\n        })\n        .catch(error => {\n          console.error('Error adding member:', error);\n          alert('Error adding member: ' + error.message);\n        });\n    } else {\n      alert('Please fill in all required fields.');\n    }\n  }}\n  disabled={!newMemberName || !newMemberFirstname || newMemberId === null || selectedTeamId === null}\n>\n  Add Member\n</button>\n</div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminManageTeamMembers;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}