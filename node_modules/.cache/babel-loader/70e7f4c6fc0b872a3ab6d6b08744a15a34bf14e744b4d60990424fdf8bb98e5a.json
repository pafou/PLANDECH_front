{"ast":null,"code":"import _objectSpread from\"/Users/pascal/workspace/plan_de_charge/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React from'react';import{API_BASE_URL}from'../apiConfig';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminManageSubjectTypes=_ref=>{let{subjectTypes,setSubjectTypes,newSubjectType,setNewSubjectType}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"subject-types-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Subject Types\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"subject-types-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"subject-types-list\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Color\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:subjectTypes.map(type=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:type.id_subject_type}),/*#__PURE__*/_jsx(\"td\",{contentEditable:true,suppressContentEditableWarning:true,onBlur:e=>{var _e$currentTarget$text;const newType=((_e$currentTarget$text=e.currentTarget.textContent)===null||_e$currentTarget$text===void 0?void 0:_e$currentTarget$text.trim())||'';if(newType!==type.type){const token=localStorage.getItem('jwtToken');if(token){fetch(\"\".concat(API_BASE_URL,\"/api/subject-types/\").concat(type.id_subject_type),{method:'PUT',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify({type:newType})}).then(response=>{if(response.ok){// Update the subject type in the state\nsetSubjectTypes(prevTypes=>prevTypes.map(t=>t.id_subject_type===type.id_subject_type?_objectSpread(_objectSpread({},t),{},{type:newType}):t));}else{// No alert for error\n}}).catch(error=>{console.error('Error updating subject type:',error);// No alert for error\n});}}},children:type.type}),/*#__PURE__*/_jsx(\"td\",{style:{backgroundColor:type.color_hex,color:'#fff',textAlign:'center',padding:'5px'},children:type.color_hex}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"common-add-button\",onClick:()=>{const isConfirmed=window.confirm(\"Are you sure you want to delete the subject type \\\"\".concat(type.type,\"\\\"?\"));if(isConfirmed){const token=localStorage.getItem('jwtToken');if(token){fetch(\"\".concat(API_BASE_URL,\"/api/subject-types/\").concat(type.id_subject_type),{method:'DELETE',headers:{Authorization:\"Bearer \".concat(token)}}).then(response=>{if(response.ok){// Update the subject types in the state\nsetSubjectTypes(prevTypes=>prevTypes.filter(t=>t.id_subject_type!==type.id_subject_type));}else{// No alert for error\n}}).catch(error=>{console.error('Error deleting subject type:',error);// No alert for error\n});}}},children:\"Remove\"})})]},type.id_subject_type))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"subject-types-add\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Type\",value:newSubjectType,onChange:e=>setNewSubjectType(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(newSubjectType){const token=localStorage.getItem('jwtToken');if(token){fetch(\"\".concat(API_BASE_URL,\"/api/subject-types\"),{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify({type:newSubjectType})}).then(response=>{if(response.ok){// Fetch the updated list of subject types\nfetch(\"\".concat(API_BASE_URL,\"/api/subject-types\"),{headers:{Authorization:\"Bearer \".concat(token)}}).then(response=>response.json()).then(typeData=>{const typesArray=typeData.map(type=>({id_subject_type:type.id_subject_type,type:type.type,color_hex:type.color_hex}));setSubjectTypes(typesArray);setNewSubjectType('');}).catch(error=>{console.error('Error fetching subject types:',error);});}else{// No alert for error\n}}).catch(error=>{console.error('Error adding subject type:',error);// No alert for error\n});}}else{alert('Please fill in all required fields.');}},disabled:!newSubjectType,children:\"Add Type\"})]})]})]});};export default AdminManageSubjectTypes;","map":{"version":3,"names":["React","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","AdminManageSubjectTypes","_ref","subjectTypes","setSubjectTypes","newSubjectType","setNewSubjectType","className","children","map","type","id_subject_type","contentEditable","suppressContentEditableWarning","onBlur","e","_e$currentTarget$text","newType","currentTarget","textContent","trim","token","localStorage","getItem","fetch","concat","method","headers","Authorization","body","JSON","stringify","then","response","ok","prevTypes","t","_objectSpread","catch","error","console","style","backgroundColor","color_hex","color","textAlign","padding","onClick","isConfirmed","window","confirm","filter","placeholder","value","onChange","target","json","typeData","typesArray","alert","disabled"],"sources":["/Users/pascal/workspace/plan_de_charge/front/src/components/Admin_manage_subject_types.tsx"],"sourcesContent":["import React from 'react';\nimport { API_BASE_URL } from '../apiConfig';\n\ninterface SubjectType {\n  id_subject_type: number;\n  type: string;\n  color_hex: string;\n}\n\ninterface AdminManageSubjectTypesProps {\n  subjectTypes: SubjectType[];\n  setSubjectTypes: React.Dispatch<React.SetStateAction<SubjectType[]>>;\n  newSubjectType: string;\n  setNewSubjectType: React.Dispatch<React.SetStateAction<string>>;\n}\n\nconst AdminManageSubjectTypes: React.FC<AdminManageSubjectTypesProps> = ({\n  subjectTypes,\n  setSubjectTypes,\n  newSubjectType,\n  setNewSubjectType\n}) => {\n\n  return (\n    <div className=\"subject-types-section\">\n      <h2>Subject Types</h2>\n      <div className=\"subject-types-content\">\n        <div className=\"subject-types-list\">\n          <table>\n            <thead>\n              <tr>\n                <th>ID</th>\n                <th>Type</th>\n                <th>Color</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {subjectTypes.map((type) => (\n                <tr key={type.id_subject_type}>\n                  <td>{type.id_subject_type}</td>\n                  <td\n                    contentEditable\n                    suppressContentEditableWarning\n                    onBlur={(e) => {\n                      const newType = e.currentTarget.textContent?.trim() || '';\n                      if (newType !== type.type) {\n                        const token = localStorage.getItem('jwtToken');\n                        if (token) {\n                          fetch(`${API_BASE_URL}/api/subject-types/${type.id_subject_type}`, {\n                            method: 'PUT',\n                            headers: {\n                              'Content-Type': 'application/json',\n                              Authorization: `Bearer ${token}`,\n                            },\n                            body: JSON.stringify({ type: newType }),\n                          })\n                            .then(response => {\n                              if (response.ok) {\n                                // Update the subject type in the state\n                                setSubjectTypes(prevTypes => prevTypes.map(t =>\n                                  t.id_subject_type === type.id_subject_type\n                                    ? { ...t, type: newType }\n                                    : t\n                                ));\n                              } else {\n                                // No alert for error\n                              }\n                            })\n                            .catch(error => {\n                              console.error('Error updating subject type:', error);\n                              // No alert for error\n                            });\n                        }\n                      }\n                    }}\n                  >\n                    {type.type}\n                  </td>\n                  <td style={{ backgroundColor: type.color_hex, color: '#fff', textAlign: 'center', padding: '5px' }}>\n                    {type.color_hex}\n                  </td>\n                  <td>\n                    <button\n                      className=\"common-add-button\"\n                      onClick={() => {\n                        const isConfirmed = window.confirm(`Are you sure you want to delete the subject type \"${type.type}\"?`);\n                        if (isConfirmed) {\n                          const token = localStorage.getItem('jwtToken');\n                          if (token) {\n                            fetch(`${API_BASE_URL}/api/subject-types/${type.id_subject_type}`, {\n                              method: 'DELETE',\n                              headers: {\n                                Authorization: `Bearer ${token}`,\n                              },\n                            })\n                              .then(response => {\n                                if (response.ok) {\n                                  // Update the subject types in the state\n                                  setSubjectTypes(prevTypes => prevTypes.filter(t => t.id_subject_type !== type.id_subject_type));\n                                } else {\n                                  // No alert for error\n                                }\n                              })\n                              .catch(error => {\n                                console.error('Error deleting subject type:', error);\n                                // No alert for error\n                              });\n                          }\n                        }\n                      }}\n                    >\n                      Remove\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n        <div className=\"subject-types-add\">\n          <input\n            type=\"text\"\n            placeholder=\"Type\"\n            value={newSubjectType}\n            onChange={(e) => setNewSubjectType(e.target.value)}\n          />\n          <button\n            onClick={() => {\n              if (newSubjectType) {\n                const token = localStorage.getItem('jwtToken');\n                if (token) {\n                  fetch(`${API_BASE_URL}/api/subject-types`, {\n                    method: 'POST',\n                    headers: {\n                      'Content-Type': 'application/json',\n                      Authorization: `Bearer ${token}`,\n                    },\n                    body: JSON.stringify({ type: newSubjectType }),\n                  })\n                    .then(response => {\n                      if (response.ok) {\n                        // Fetch the updated list of subject types\n                        fetch(`${API_BASE_URL}/api/subject-types`, {\n                          headers: {\n                            Authorization: `Bearer ${token}`,\n                          },\n                        })\n                          .then(response => response.json())\n                          .then(typeData => {\n                            const typesArray = typeData.map((type: any) => ({\n                              id_subject_type: type.id_subject_type,\n                              type: type.type,\n                              color_hex: type.color_hex\n                            }));\n                            setSubjectTypes(typesArray);\n                            setNewSubjectType('');\n                          })\n                          .catch(error => {\n                            console.error('Error fetching subject types:', error);\n                          });\n                      } else {\n                        // No alert for error\n                      }\n                    })\n                    .catch(error => {\n                      console.error('Error adding subject type:', error);\n                      // No alert for error\n                    });\n                }\n              } else {\n                alert('Please fill in all required fields.');\n              }\n            }}\n            disabled={!newSubjectType}\n          >\n            Add Type\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminManageSubjectTypes;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}