{"ast":null,"code":"var _jsxFileName = \"/Users/pascal/workspace/plan_de_charge/front/src/components/Modif.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { API_BASE_URL } from '../apiConfig';\nimport './Modif.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Modif() {\n  _s();\n  // États existants\n  const [data, setData] = useState([]);\n  const [groupedData, setGroupedData] = useState([]);\n  const [months, setMonths] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [sortConfig, setSortConfig] = useState({\n    key: 'name',\n    direction: 'ascending'\n  });\n  const [nameFilter, setNameFilter] = useState('');\n  const [subjectFilter, setSubjectFilter] = useState('');\n  const [teamFilter, setTeamFilter] = useState('');\n  const [minMonth, setMinMonth] = useState('');\n  const [maxMonth, setMaxMonth] = useState('');\n  const [userId, setUserId] = useState('');\n  const [editing, setEditing] = useState(null);\n  const [newLoad, setNewLoad] = useState(null);\n  const [newComment, setNewComment] = useState(null);\n  const [editingComment, setEditingComment] = useState(null);\n  const [showAddLineForm, setShowAddLineForm] = useState(false);\n  const [availableNames, setAvailableNames] = useState([]);\n  const [availableSubjects, setAvailableSubjects] = useState([]);\n  const [selectedName, setSelectedName] = useState('');\n  const [selectedSubject, setSelectedSubject] = useState('');\n  const [relatedIds, setRelatedIds] = useState([]);\n\n  // Initialisation des mois par défaut\n  useEffect(() => {\n    const currentDate = new Date();\n    const minDate = new Date(currentDate);\n    minDate.setMonth(currentDate.getMonth() - 1);\n    setMinMonth(minDate.toISOString().split('T')[0]);\n    const maxDate = new Date(currentDate);\n    maxDate.setMonth(currentDate.getMonth() + 18);\n    setMaxMonth(maxDate.toISOString().split('T')[0]);\n  }, []);\n\n  // Chargement initial des données\n  useEffect(() => {\n    const token = localStorage.getItem('jwtToken');\n    if (!token) {\n      setLoading(false);\n      return;\n    }\n    try {\n      const decodedToken = JSON.parse(atob(token.split('.')[1]));\n      const currentUserId = decodedToken.userId;\n      setUserId(currentUserId);\n      document.title = `Modif - User: ${currentUserId}`;\n\n      // Récupère les utilisateurs liés\n      fetch(`${API_BASE_URL}/api/related-persons?id_pers=${currentUserId}`).then(response => {\n        if (!response.ok) throw new Error('Network response was not ok');\n        return response.json();\n      }).then(relatedPersons => {\n        const ids = relatedPersons.map(person => person.id_pers);\n        setRelatedIds(ids);\n\n        // Charge les données filtrées et les options pour le formulaire\n        Promise.all([fetch(`${API_BASE_URL}/api/data`).then(res => res.json()), fetch(`${API_BASE_URL}/api/persons`).then(res => res.json()), fetch(`${API_BASE_URL}/api/subjects`).then(res => res.json())]).then(([data, persons, subjects]) => {\n          const filteredData = data.filter(item => ids.includes(item.id_pers));\n          setData(filteredData);\n          processData(filteredData);\n          setAvailableNames(persons.map(p => `${p.name} ${p.firstname}`));\n          setAvailableSubjects(subjects.map(s => s.subject));\n          setLoading(false);\n        }).catch(error => {\n          setError(error.message);\n          setLoading(false);\n        });\n      }).catch(error => {\n        setError(error.message);\n        setLoading(false);\n      });\n    } catch (e) {\n      setError('Invalid token');\n      setLoading(false);\n    }\n  }, []);\n  const processData = data => {\n    const grouped = {};\n    const monthsSet = new Set();\n    data.forEach(item => {\n      const key = `${item.name}-${item.firstname}-${item.subject}-${item.comment || 'No comment'}`;\n      monthsSet.add(item.month);\n      if (!grouped[key]) {\n        grouped[key] = {\n          id_pers: item.id_pers,\n          id_subject: item.id_subject,\n          name: item.name,\n          firstname: item.firstname,\n          subject: item.subject,\n          type: item.type,\n          comment: item.comment || 'No comment',\n          loads: {},\n          team: item.team || 'Unknown',\n          color_hex: item.color_hex || ''\n        };\n      } else {\n        grouped[key].color_hex = item.color_hex || '';\n      }\n      grouped[key].loads[item.month] = item.load;\n    });\n    setGroupedData(Object.values(grouped));\n    setMonths(Array.from(monthsSet).sort());\n  };\n  const handleAddLine = async () => {\n    if (!selectedName || !selectedSubject || !userId) return;\n    try {\n      const [personsRes, subjectsRes] = await Promise.all([fetch(`${API_BASE_URL}/api/persons`).then(res => res.json()), fetch(`${API_BASE_URL}/api/subjects`).then(res => res.json())]);\n      const [name, firstname] = selectedName.split(' ');\n      const person = personsRes.find(p => p.name === name && p.firstname === firstname);\n      const subject = subjectsRes.find(s => s.subject === selectedSubject);\n      if (!person || !subject) {\n        console.error('Personne ou sujet introuvable');\n        return;\n      }\n      const response = await fetch(`${API_BASE_URL}/api/addNewLine`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          id_pers: person.id_pers,\n          id_subject: subject.id_subject\n        })\n      });\n      if (!response.ok) throw new Error('Échec de l\\'ajout');\n\n      // Rafraîchir les données après l'ajout\n      const dataRes = await fetch(`${API_BASE_URL}/api/data`);\n      const newData = await dataRes.json();\n      const filteredData = newData.filter(item => relatedIds.includes(item.id_pers));\n      setData(filteredData);\n      processData(filteredData);\n\n      // Réinitialiser le formulaire\n      setShowAddLineForm(false);\n      setSelectedName('');\n      setSelectedSubject('');\n    } catch (error) {\n      console.error('Erreur:', error);\n    }\n  };\n\n  // ... (le reste de tes fonctions existantes : requestSort, handleMonthChange, getFilteredMonths, etc.)\n\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 210,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"Error: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 211,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Modif page - User: \", userId]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 214,\n    columnNumber: 5\n  }, this);\n}\n_s(Modif, \"6xgHI8v+XDiuSxQ+B8wPOVgrg80=\");\n_c = Modif;\nexport default Modif;\nvar _c;\n$RefreshReg$(_c, \"Modif\");","map":{"version":3,"names":["React","useEffect","useState","API_BASE_URL","jsxDEV","_jsxDEV","Modif","_s","data","setData","groupedData","setGroupedData","months","setMonths","loading","setLoading","error","setError","sortConfig","setSortConfig","key","direction","nameFilter","setNameFilter","subjectFilter","setSubjectFilter","teamFilter","setTeamFilter","minMonth","setMinMonth","maxMonth","setMaxMonth","userId","setUserId","editing","setEditing","newLoad","setNewLoad","newComment","setNewComment","editingComment","setEditingComment","showAddLineForm","setShowAddLineForm","availableNames","setAvailableNames","availableSubjects","setAvailableSubjects","selectedName","setSelectedName","selectedSubject","setSelectedSubject","relatedIds","setRelatedIds","currentDate","Date","minDate","setMonth","getMonth","toISOString","split","maxDate","token","localStorage","getItem","decodedToken","JSON","parse","atob","currentUserId","document","title","fetch","then","response","ok","Error","json","relatedPersons","ids","map","person","id_pers","Promise","all","res","persons","subjects","filteredData","filter","item","includes","processData","p","name","firstname","s","subject","catch","message","e","grouped","monthsSet","Set","forEach","comment","add","month","id_subject","type","loads","team","color_hex","load","Object","values","Array","from","sort","handleAddLine","personsRes","subjectsRes","find","console","method","headers","body","stringify","dataRes","newData","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/pascal/workspace/plan_de_charge/front/src/components/Modif.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { API_BASE_URL } from '../apiConfig';\nimport colorMapping from '../colorMapping.json';\nimport './Modif.css';\n\ninterface DataItem {\n  id_pers: number;\n  id_subject: number;\n  name: string;\n  firstname: string;\n  subject: string;\n  type: string;\n  comment?: string;\n  month: string;\n  load: number;\n  team: string;\n  color_hex?: string;\n}\n\ninterface GroupedData {\n  id_pers: number;\n  id_subject: number;\n  name: string;\n  firstname: string;\n  subject: string;\n  type: string;\n  comment: string;\n  loads: { [key: string]: number };\n  team: string;\n  color_hex?: string;\n  [key: string]: any;\n}\n\nfunction Modif() {\n  // États existants\n  const [data, setData] = useState<DataItem[]>([]);\n  const [groupedData, setGroupedData] = useState<GroupedData[]>([]);\n  const [months, setMonths] = useState<string[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [sortConfig, setSortConfig] = useState<{ key: string; direction: string } | null>({ key: 'name', direction: 'ascending' });\n  const [nameFilter, setNameFilter] = useState('');\n  const [subjectFilter, setSubjectFilter] = useState('');\n  const [teamFilter, setTeamFilter] = useState('');\n  const [minMonth, setMinMonth] = useState('');\n  const [maxMonth, setMaxMonth] = useState('');\n  const [userId, setUserId] = useState('');\n  const [editing, setEditing] = useState<{ id_pers: number; id_subject: number; month: Date } | null>(null);\n  const [newLoad, setNewLoad] = useState<number | null>(null);\n  const [newComment, setNewComment] = useState<string | null>(null);\n  const [editingComment, setEditingComment] = useState<{ id_pers: number; id_subject: number } | null>(null);\n  const [showAddLineForm, setShowAddLineForm] = useState(false);\n  const [availableNames, setAvailableNames] = useState<string[]>([]);\n  const [availableSubjects, setAvailableSubjects] = useState<string[]>([]);\n  const [selectedName, setSelectedName] = useState('');\n  const [selectedSubject, setSelectedSubject] = useState('');\n  const [relatedIds, setRelatedIds] = useState<number[]>([]);\n\n  // Initialisation des mois par défaut\n  useEffect(() => {\n    const currentDate = new Date();\n    const minDate = new Date(currentDate);\n    minDate.setMonth(currentDate.getMonth() - 1);\n    setMinMonth(minDate.toISOString().split('T')[0]);\n\n    const maxDate = new Date(currentDate);\n    maxDate.setMonth(currentDate.getMonth() + 18);\n    setMaxMonth(maxDate.toISOString().split('T')[0]);\n  }, []);\n\n  // Chargement initial des données\n  useEffect(() => {\n    const token = localStorage.getItem('jwtToken');\n    if (!token) {\n      setLoading(false);\n      return;\n    }\n\n    try {\n      const decodedToken = JSON.parse(atob(token.split('.')[1]));\n      const currentUserId = decodedToken.userId;\n      setUserId(currentUserId);\n      document.title = `Modif - User: ${currentUserId}`;\n\n      // Récupère les utilisateurs liés\n      fetch(`${API_BASE_URL}/api/related-persons?id_pers=${currentUserId}`)\n        .then(response => {\n          if (!response.ok) throw new Error('Network response was not ok');\n          return response.json();\n        })\n        .then((relatedPersons: { id_pers: number }[]) => {\n          const ids = relatedPersons.map(person => person.id_pers);\n          setRelatedIds(ids);\n\n          // Charge les données filtrées et les options pour le formulaire\n          Promise.all([\n            fetch(`${API_BASE_URL}/api/data`).then(res => res.json()),\n            fetch(`${API_BASE_URL}/api/persons`).then(res => res.json()),\n            fetch(`${API_BASE_URL}/api/subjects`).then(res => res.json()),\n          ])\n            .then(([data, persons, subjects]) => {\n              const filteredData = data.filter((item: DataItem) => ids.includes(item.id_pers));\n              setData(filteredData);\n              processData(filteredData);\n\n              setAvailableNames(persons.map((p: { name: string; firstname: string }) => `${p.name} ${p.firstname}`));\n              setAvailableSubjects(subjects.map((s: { subject: string }) => s.subject));\n\n              setLoading(false);\n            })\n            .catch(error => {\n              setError(error.message);\n              setLoading(false);\n            });\n        })\n        .catch(error => {\n          setError(error.message);\n          setLoading(false);\n        });\n    } catch (e) {\n      setError('Invalid token');\n      setLoading(false);\n    }\n  }, []);\n\n  const processData = (data: DataItem[]) => {\n    const grouped: { [key: string]: GroupedData } = {};\n    const monthsSet = new Set<string>();\n\n    data.forEach((item) => {\n      const key = `${item.name}-${item.firstname}-${item.subject}-${item.comment || 'No comment'}`;\n      monthsSet.add(item.month);\n\n      if (!grouped[key]) {\n        grouped[key] = {\n          id_pers: item.id_pers,\n          id_subject: item.id_subject,\n          name: item.name,\n          firstname: item.firstname,\n          subject: item.subject,\n          type: item.type,\n          comment: item.comment || 'No comment',\n          loads: {},\n          team: item.team || 'Unknown',\n          color_hex: item.color_hex || '',\n        };\n      } else {\n        grouped[key].color_hex = item.color_hex || '';\n      }\n\n      grouped[key].loads[item.month] = item.load;\n    });\n\n    setGroupedData(Object.values(grouped));\n    setMonths(Array.from(monthsSet).sort());\n  };\n\n  const handleAddLine = async () => {\n    if (!selectedName || !selectedSubject || !userId) return;\n\n    try {\n      const [personsRes, subjectsRes] = await Promise.all([\n        fetch(`${API_BASE_URL}/api/persons`).then(res => res.json()),\n        fetch(`${API_BASE_URL}/api/subjects`).then(res => res.json()),\n      ]);\n\n      const [name, firstname] = selectedName.split(' ');\n      const person = personsRes.find((p: { name: string; firstname: string }) =>\n        p.name === name && p.firstname === firstname\n      );\n\n      const subject = subjectsRes.find((s: { subject: string }) => s.subject === selectedSubject);\n\n      if (!person || !subject) {\n        console.error('Personne ou sujet introuvable');\n        return;\n      }\n\n      const response = await fetch(`${API_BASE_URL}/api/addNewLine`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          id_pers: person.id_pers,\n          id_subject: subject.id_subject,\n        }),\n      });\n\n      if (!response.ok) throw new Error('Échec de l\\'ajout');\n\n      // Rafraîchir les données après l'ajout\n      const dataRes = await fetch(`${API_BASE_URL}/api/data`);\n      const newData = await dataRes.json();\n      const filteredData = newData.filter((item: DataItem) => relatedIds.includes(item.id_pers));\n\n      setData(filteredData);\n      processData(filteredData);\n\n      // Réinitialiser le formulaire\n      setShowAddLineForm(false);\n      setSelectedName('');\n      setSelectedSubject('');\n\n    } catch (error) {\n      console.error('Erreur:', error);\n    }\n  };\n\n  // ... (le reste de tes fonctions existantes : requestSort, handleMonthChange, getFilteredMonths, etc.)\n\n  if (loading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error}</div>;\n\n  return (\n    <div>\n      <h1>Modif page - User: {userId}</h1>\n      {/* ... (le reste de ton JSX existant) */}\n    </div>\n  );\n}\n\nexport default Modif;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}